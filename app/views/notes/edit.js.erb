var selector = "#each-note-<%= @note.id %>";
var height = $(selector).css('height');
//just correcting the height 
var extendedHeight = parseInt(height.substr(0,height.indexOf('px'))) -20 + "px";

$(selector)
	.replaceWith("<%= j render(:partial=>'edit_note',:locals=>{:note=>@note}) %>");
$("#editor").css({
	"height":extendedHeight
});
$("#editor").autogrow();


//insert error messages accordingly
<% if !flash[:notice].blank? %>
    $("#flash").html("<div class='notice'><%= escape_javascript(flash[:notice]) %></div>");
    <%= flash[:notice] = nil %>
<% elsif !flash[:alert].blank? %>
    $("#flash").html("<div class='error'><%= escape_javascript(flash[:alert]) %></div>");
    <%= flash[:alert]=nil %>
<% elsif !flash[:warning].blank? %>
    $("#flash").html("<div class='warning'><%= escape_javascript(flash[:warning]) %></div>");
    <%= flash[:warning] = nil %>
<% end %>